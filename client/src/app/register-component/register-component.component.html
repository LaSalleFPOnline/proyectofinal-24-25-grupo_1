<form (ngSubmit)="validarFormulario()" class="formulario registro">
  <div class="titulo">Registro</div>

  <!-- Campo de Email y Validación -->
  <div *ngIf="!emailValidado" class="campo">
    <label class="text">* Email:</label>
    <input type="email" id="email" #emailInput [(ngModel)]="email" name="email" class="input" required>
    <img class="line" src="assets/Images/line.png">
  </div>
  <button *ngIf="!emailValidado" type="button" (click)="validarEmail()" class="button-validar">Validar Email</button>

  <!-- Campos adicionales después de validar el email -->
  <div *ngIf="emailValidado">
    <!-- Campo de Email (solo lectura) -->
    <div class="campo">
      <label class="text">* Email:</label>
      <input type="email" id="email" [(ngModel)]="email" name="email" class="input" readonly>
      <img class="line" src="assets/Images/line.png">
    </div>

    <!-- Contraseña y Confirmar Contraseña -->
    <div class="campo">
      <label class="text">* Contraseña:</label>
      <input type="password" id="password" [(ngModel)]="password" name="password" class="input" required>
      <img class="line" src="assets/Images/line.png">
    </div>

    <div class="campo">
      <label class="text">* Repite la contraseña:</label>
      <input type="password" id="confirmPassword" [(ngModel)]="confirmPassword" name="confirmPassword" class="input"
            [ngClass]="{'error': passwordsDoNotMatch}" #confirmPasswordInput
            (blur)="checkPasswords()">
      <img class="line" src="assets/Images/line.png">
    </div>

    <!-- Campo de Rol (No editable) -->
    <div class="campo">
      <label class="text">* Rol:</label>
      <input type="text" #rolInput [value]="rol" class="input" disabled>
      <img class="line" src="assets/Images/line.png">
    </div>

    <!-- Campos específicos para cada rol -->
    <!-- Rol Empresa -->
    <div *ngIf="rol === 1">
      <div class="campo">
        <label class="text">* Nombre de la Empresa:</label>
        <input type="text" id="nombre_empresa" [(ngModel)]="nombre_empresa" name="nombre_empresa" class="input">
        <img class="line" src="assets/Images/line.png">
      </div>

      <div class="campo">
        <label class="text">* Web URL:</label>
        <input type="text" id="web_url" [(ngModel)]="web_url" name="web_url" class="input">
        <img class="line" src="assets/Images/line.png">
      </div>

      <div class="campo">
        <label class="text">Spot URL:</label>
        <input type="text" id="spot_url" [(ngModel)]="spot_url" name="spot_url" class="input">
        <img class="line" src="assets/Images/line.png">
      </div>

      <div class="campo">
        <label class="text">* Logo URL:</label>
        <input type="text" id="logo_url" [(ngModel)]="logo_url" name="logo_url" class="input">
        <img class="line" src="assets/Images/line.png">
      </div>

      <div class="campo">
        <label class="text">Descripción de productos o servicios</label>
        <img class="line" src="assets/Images/line.png">
        <textarea class="textarea" placeholder="Escribe aquí..." [(ngModel)]="descripcion" name="descripcion"></textarea>
      </div>

      <div class="campo">
        <label class="text">* URL Meet:</label>
        <input type="text" id="url_meet" [(ngModel)]="url_meet" name="url_meet" class="input">
        <img class="line" src="assets/Images/line.png">
      </div>

      <div class="campo">
        <label class="text">* Horarios de atención al cliente</label>
        <div class="horario">
            <p class="text">Mañana:</p>
            <p class="text">desde</p>
            <input type="time" 
            [(ngModel)]="horario_meet_morning_start" 
            (change)="validarHorarioManana()" 
            name="horario_meet_morning_start" 
            class="input time-input" 
            [min]="'10:00'" 
            [max]="'13:00'">
            <p class="text">hasta</p>
            <input type="time" 
            [(ngModel)]="horario_meet_morning_end" 
            (change)="validarHorarioManana()" 
            name="horario_meet_morning_end" 
            class="input time-input" 
            [min]="'10:00'" 
            [max]="'13:00'">
        </div>
        <div *ngIf="horarioMananaError" class="error-message">{{horarioMananaError}}</div>
        <img class="line" src="assets/Images/line.png">
        <div class="horario">
            <p class="text">Tarde:</p>
            <p class="text">desde</p>
            <input type="time" 
            [(ngModel)]="horario_meet_afternoon_start" 
            (change)="validarHorarioTarde()" 
            name="horario_meet_afternoon_start" 
            class="input time-input" 
            [min]="'15:30'" 
            [max]="'18:30'">
            <p class="text">hasta</p>
            <input type="time" 
            [(ngModel)]="horario_meet_afternoon_end" 
            (change)="validarHorarioTarde()" 
            name="horario_meet_afternoon_end" 
            class="input time-input" 
            [min]="'15:30'" 
            [max]="'18:30'">
        </div>
        <div *ngIf="horarioTardeError" class="error-message">{{horarioTardeError}}</div>
        <img class="line" src="assets/Images/line.png">
    </div>
      <div class="campo">
        <label class="text">* Entidad:</label>
        <input type="text" [(ngModel)]="entidad" name="entidad" class="input" readonly>
        <img class="line" src="assets/Images/line.png">
      </div>
      </div>
      <!-- Botón de Registro -->
      <button type="submit" class="button-validar">Registrarse</button>
    </div>

    <!-- Rol Visitante -->
    <div *ngIf="rol === 2" class="campo">
      <div class="campo">
        <label class="text">* Entidad:</label>
        <input type="text" [(ngModel)]="entidad" name="entidad" class="input" readonly>
        <img class="line" src="assets/Images/line.png">
      </div>
      <img class="line" src="assets/Images/line.png">

      <!-- Botón de Registro -->
      <button type="submit" class="button-validar">Registrarse</button>
    </div>

    <!-- Mensaje de Error -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
</form>