<nav class="header" [ngClass]="{'shrink': isShrunk}">

    <img class="logo" src="assets/Images/logo.png" (click)="goToHomePage()">

    <!-- Contenedor para los botones y el menú -->
    <div class="button">
        <ng-container *ngIf="!isLoggedIn; else loggedInMenu">
            <!-- <button class="label" (click)="navigateTo('/')">Inicio</button> -->
            <button class="label" (click)="navigateTo('/', 'agenda')">Programa</button>
            <button class="label" (click)="navigateTo('/', 'descargas')">Descargas</button>
            <button class="label" (click)="navigateTo('/', 'patrocinadores')">Patrocinadores</button>
            <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            <button class="login" (click)="handleLogin()">
                <img src="assets/Images/button-login.png">
            </button>
        </ng-container>
        <ng-template #loggedInMenu>
            <!-- Botones para usuarios logueados -->
            <ng-container *ngIf="userRole === 1 || userRole === 3">
                <!-- Botones para Empresa y Visitante -->
                <button class="label" (click)="navigateTo('/feria')">Feria Virtual</button>
                <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            </ng-container>
            <ng-container *ngIf="userRole === 2">
                <!-- Botones para Admin -->
                <button class="label" (click)="navigateTo('/feria')">Feria Virtual</button>
                <button class="label" (click)="navigateTo('admin')">Panel del administrador</button>
                <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            </ng-container>
            <button class="login" (click)="toggleDropdown()">
                <img src="assets/Images/button-login.png" alt="Login">
                <div class="dropdown-menu" [ngClass]="{'active': dropdownOpen}">
                    <button class="dropdown-item" (click)="navigateToProfile()">
                        <mat-icon>person</mat-icon> Mi Perfil
                    </button>
                    <button class="dropdown-item" (click)="handleLogout()">
                        <mat-icon>exit_to_app</mat-icon> Cerrar Sesión
                    </button>
                </div>
            </button>
        </ng-template>
    <!-- TODO si registrado, que aparezca el logo -->
    </div>

    <!-- Botón de hamburguesa -->
    <button class="hamburger" (click)="toggleMenu()" aria-label="Menu" [ngClass]="{'shrink': isShrunk}">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </button>

    <!-- Menú de navegación móvil -->
    <nav class="mobile-menu" [class.active]="isMenuOpen">
        <ng-container *ngIf="!isLoggedIn; else mobileLoggedInMenu">
            <!-- <button class="label" (click)="navigateTo('/')">Inicio</button> -->
            <button class="label" (click)="navigateTo('/', 'agenda')">Programa</button>
            <button class="label" (click)="navigateTo('/', 'descargas')">Descargas</button>
            <button class="label" (click)="navigateTo('/', 'patrocinadores')">Patrocinadores</button>
            <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            <button class="login" (click)="handleLogin()">
                <img src="assets/Images/button-login.png">
            </button>
        </ng-container>
        <ng-template #mobileLoggedInMenu>
            <!-- Botones para usuarios logueados -->
            <ng-container *ngIf="userRole === 1 || userRole === 3">
                <!-- Botones para Empresa y Visitante -->
                <button class="label" (click)="navigateTo('/feria')">Feria Virtual</button>
                <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            </ng-container>
            <ng-container *ngIf="userRole === 2">
                <!-- Botones para Admin -->
                <button class="label" (click)="navigateTo('/feria')">Feria Virtual</button>
                <button class="label" (click)="navigateTo('admin')">Panel del administrador</button>
                <button class="label" (click)="navigateTo('nosotros')">Nosotros</button>
            </ng-container>
            <button class="login" (click)="toggleDropdown()">
                <img src="assets/Images/button-login.png" alt="Login">
                <div class="dropdown-menu" [ngClass]="{'active': dropdownOpen}">
                    <button class="dropdown-item" (click)="navigateToProfile()">
                        <mat-icon>person</mat-icon> Mi Perfil
                    </button>
                    <button class="dropdown-item" (click)="handleLogout()">
                        <mat-icon>exit_to_app</mat-icon> Cerrar Sesión
                    </button>
                </div>
            </button>
        </ng-template>
    </nav>
</nav>